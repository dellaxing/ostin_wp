var fmwp_topics_page=2,fmwp_no_topics_template=fmwp_front_data.can_topic?'<span class="fmwp-forum-no-topics">'+wp.i18n.__('No one has created a topic in this forum. Be the first and <a href="javascript:void(0);" class="fmwp-create-topic fmwp-login-to-action">create a topic</a>.',"forumwp")+"</span>":'<span class="fmwp-forum-no-topics">'+wp.i18n.__("No one has created a topic in this forum.","forumwp")+"</span>",fmwp_no_topics_locked_template='<span class="fmwp-forum-no-topics">'+wp.i18n.__("No one has created a topic in this forum.","forumwp")+"</span>",fmwp_no_topics_search_template='<span class="fmwp-forum-no-topics">'+wp.i18n.__("No topics found for this search.","forumwp")+"</span>";function fmwp_get_topics(e,o){fmwp_set_busy("individual_forum",!0);var p={forum_id:e.data("fmwp_forum_id"),page:o.page,order:o.order,nonce:fmwp_front_data.nonce};o.search&&(p.search=o.search),wp.ajax.send("fmwp_get_topics",{data:p,success:function(p){if(p.length){e.siblings(".fmwp-topics-wrapper-heading").removeClass("fmwp-no-actions-heading");var a=wp.template("fmwp-topics-list")({topics:p});e.data("order",o.order),e.find(".fmwp-load-more").remove(),1===o.page?e.html(a+'<span class="fmwp-load-more"></span>'):e.append(a+'<span class="fmwp-load-more"></span>'),fmwp_topics_page=parseInt(o.page)+1}else e.find(".fmwp-load-more").remove(),1===o.page&&(o.search?e.html(fmwp_no_topics_search_template):e.parents(".fmwp-forum-wrapper").hasClass("fmwp-forum-locked")||e.parents(".fmwp-forum-wrapper").hasClass("fmwp-forum-pending")?e.html(fmwp_no_topics_locked_template):e.html(fmwp_no_topics_template),e.siblings(".fmwp-topics-wrapper-heading").addClass("fmwp-no-actions-heading"));fmwp_set_busy("individual_forum",!1)},error:function(p){fmwp_set_busy("individual_forum",!1),console.log(p)}})}jQuery(document).ready(function(r){fmwp_embed_containers.push(".fmwp-forum-content"),r(".fmwp-topics-wrapper").each(function(){fmwp_get_topics(r(this),{page:1,order:r(this).data("order")})}),r(window).scroll(function(){var p={allow:!0,reallow:function(){p.allow=!0},delay:400};if(!fmwp_is_busy("individual_forum")&&p.allow){p.allow=!1;var a=r(".fmwp-topics-wrapper .fmwp-load-more"),e=r(".fmwp-topics-wrapper").parents(".fmwp-forum-content").siblings(".fmwp-forum-head").data("fmwp_search");if(a.length)setTimeout(p.reallow,p.delay),a.offset().top-r(window).scrollTop()<1e3&&fmwp_get_topics(r(".fmwp-topics-wrapper"),{page:fmwp_topics_page,order:r(".fmwp-topics-wrapper").data("order"),search:e})}}),r(document.body).on("change",".fmwp-forum-sort",function(p){if(p.preventDefault(),!fmwp_is_busy("individual_forum")){var a=r(this).parents(".fmwp-forum-head").data("fmwp_forum_id"),e=r('.fmwp-topics-wrapper[data-fmwp_forum_id="'+a+'"]'),o=r(this).val(),s=e.parents(".fmwp-forum-content").siblings(".fmwp-forum-head").data("fmwp_search");fmwp_get_topics(e,{page:1,order:o,search:s})}}),r(document.body).on("click",".fmwp-search-toggle",function(p){p.preventDefault(),r(this).parents(".fmwp-forum-nav-bar-mobile").find(".fmwp-search-wrapper").is(":visible")?(r(this).removeClass("fmwp-active"),r(this).parents(".fmwp-forum-nav-bar-mobile").find(".fmwp-search-wrapper").css("display","none")):(r(this).parents(".fmwp-forum-nav-bar-mobile").find(".fmwp-search-wrapper").css("display","flex"),r(this).addClass("fmwp-active"))}),r(document.body).on("click",".fmwp-search-topic",function(p){if(p.preventDefault(),!fmwp_is_busy("individual_forum")){var a=r(this).siblings("label").find(".fmwp-forum-search-line").val(),e=r(this).parents(".fmwp-forum-head").data("fmwp_search");if(void 0===e&&""===a||e===a)return!1;r(this).parents(".fmwp-forum-head").find(".fmwp-forum-search-line").val(a),r(this).parents(".fmwp-forum-head").data("fmwp_search",a);var o=r(this).parents(".fmwp-forum-head").data("fmwp_forum_id");fmwp_get_topics(r('.fmwp-topics-wrapper[data-fmwp_forum_id="'+o+'"]'),{page:1,order:r(this).parents(".fmwp-forum-head").find(".fmwp-forum-sort").val(),search:a})}}),r(document.body).on("keypress",".fmwp-forum-search-line",function(p){13===p.which&&r(this).parents("label").siblings(".fmwp-search-topic").trigger("click")})});