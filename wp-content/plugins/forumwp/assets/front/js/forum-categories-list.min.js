var fmwp_forum_categories_page=2,fmwp_forum_categories_loading=!1,fmwp_no_forum_categories_template='<span class="fmwp-no-forum-categories">'+wp.i18n.__("No one created the forum categories.","forumwp")+"</span>",fmwp_no_forum_categories_search_template='<span class="fmwp-no-forum-categories">'+wp.i18n.__("No results found.","forumwp")+"</span>";function fmwp_get_forum_categories(o,r){fmwp_forum_categories_loading=!0;var e={nonce:fmwp_front_data.nonce};1!==r.page&&(e.offset=o.data("fmwp_offset"),e.child_offset=o.data("fmwp_child_offset")),r.search&&(e.search=r.search),wp.ajax.send("fmwp_get_forum_categories",{data:e,success:function(e){if(e.categories.length){var a=wp.template("fmwp-forum-categories-list")({categories:e.categories});o.data("fmwp_offset",e.pagination.offset),o.data("fmwp_child_offset",e.pagination.child_offset),o.find(".fmwp-load-more").remove(),1===r.page?o.html(a+'<span class="fmwp-load-more"></span>'):o.append(a+'<span class="fmwp-load-more"></span>'),fmwp_forum_categories_page=parseInt(r.page)+1}else o.find(".fmwp-load-more").remove(),1===r.page&&(r.search?o.html(fmwp_no_forum_categories_search_template):o.html(fmwp_no_forum_categories_template));fmwp_forum_categories_loading=!1},error:function(e){console.log(e)}})}jQuery(document).ready(function(r){r(".fmwp-forum-categories-wrapper").each(function(){fmwp_get_forum_categories(r(this),{page:1})}),r(window).scroll(function(){var e={allow:!0,reallow:function(){e.allow=!0},delay:400};if(!fmwp_forum_categories_loading&&e.allow){e.allow=!1;var a=r(".fmwp-forum-categories-wrapper").parents(".fmwp-archive-forums-wrapper").find(".fmwp-forum-categories-search-line").val(),o=r(".fmwp-forum-categories-wrapper .fmwp-load-more");if(o.length)setTimeout(e.reallow,e.delay),o.offset().top-r(window).scrollTop()<1e3&&fmwp_get_forum_categories(r(".fmwp-forum-categories-wrapper"),{page:fmwp_forum_categories_page,search:a})}}),r(document.body).on("click",".fmwp-search-forum-category",function(e){e.preventDefault();var a=r(this).siblings("label").find(".fmwp-forum-categories-search-line").val(),o=r(this).parents(".fmwp-forum-categories-list-head").data("fmwp_search");if(void 0===o&&""===a||o===a)return!1;r(this).parents(".fmwp-forum-categories-list-head").data("fmwp_search",a),fmwp_get_forum_categories(r(this).parents(".fmwp-forum-categories-list-head").siblings(".fmwp-forum-categories-wrapper"),{page:1,search:a})}),r(document.body).on("keypress",".fmwp-forum-categories-search-line",function(e){13===e.which&&r(this).siblings(".fmwp-search-forum-category").trigger("click")})});