var fmwp_topics_page=2,fmwp_no_topics_template='<span class="fmwp-forum-no-topics">'+wp.i18n.__("No topics have been created.","forumwp")+"</span>",fmwp_no_topics_search_template='<span class="fmwp-forum-no-topics">'+wp.i18n.__("No results found.","forumwp")+"</span>";function fmwp_get_topics(e,a){fmwp_set_busy("topics_list",!0);var p={tag:e.data("topic_tag_id"),status:e.data("status"),type:e.data("type"),page:a.page,order:a.order,nonce:fmwp_front_data.nonce};a.search&&(p.search=a.search),wp.ajax.send("fmwp_get_topics",{data:p,success:function(p){if(p.length){e.siblings(".fmwp-topics-wrapper-heading").removeClass("fmwp-no-actions-heading");var s=wp.template("fmwp-topics-list")({topics:p});e.find(".fmwp-load-more").remove(),1===a.page?e.html(s+'<span class="fmwp-load-more"></span>'):e.append(s+'<span class="fmwp-load-more"></span>'),fmwp_topics_page=parseInt(a.page)+1}else e.find(".fmwp-load-more").remove(),1===a.page&&(a.search?e.html(fmwp_no_topics_search_template):e.html(fmwp_no_topics_template),e.siblings(".fmwp-topics-wrapper-heading").addClass("fmwp-no-actions-heading"));fmwp_set_busy("topics_list",!1)},error:function(p){console.log(p),fmwp_set_busy("topics_list",!1)}})}jQuery(document).ready(function(t){t(".fmwp-topics-wrapper").each(function(){var p=t(this).parents(".fmwp-archive-topics-wrapper").find(".fmwp-topics-sort").val();fmwp_get_topics(t(this),{page:1,order:p})}),t(window).scroll(function(){var p={allow:!0,reallow:function(){p.allow=!0},delay:400};if(!fmwp_is_busy("topics_list")&&p.allow){p.allow=!1;var s=t(".fmwp-topics-wrapper .fmwp-load-more"),e=t(".fmwp-topics-wrapper").parents(".fmwp-archive-topics-wrapper").data("fmwp_search"),a=t(".fmwp-topics-wrapper").parents(".fmwp-archive-topics-wrapper").find(".fmwp-topics-sort").val();if(s.length)setTimeout(p.reallow,p.delay),s.offset().top-t(window).scrollTop()<1e3&&fmwp_get_topics(t(".fmwp-topics-wrapper"),{page:fmwp_topics_page,order:a,search:e})}}),t(document.body).on("change",".fmwp-topics-sort",function(p){if(p.preventDefault(),!fmwp_is_busy("topics_list")){var s=t(this).val(),e=t(this).parents(".fmwp-archive-topics-wrapper").data("fmwp_search");fmwp_topics_page=1,fmwp_get_topics(t(this).parents(".fmwp-archive-topics-wrapper").find(".fmwp-topics-wrapper"),{page:1,search:e,order:s})}}),t(document.body).on("click",".fmwp-search-topic",function(p){if(p.preventDefault(),!fmwp_is_busy("topics_list")){var s=t(this).siblings("label").find(".fmwp-topics-search-line").val(),e=t(this).parents(".fmwp-archive-topics-wrapper").data("fmwp_search");if(void 0===e&&""===s||e===s)return!1;t(this).parents(".fmwp-archive-topics-wrapper").find(".fmwp-topics-search-line").val(s),t(this).parents(".fmwp-archive-topics-wrapper").data("fmwp_search",s);var a=t(this).parents(".fmwp-archive-topics-wrapper").find(".fmwp-topics-sort").val();fmwp_topics_page=1,fmwp_get_topics(t(this).parents(".fmwp-archive-topics-wrapper").find(".fmwp-topics-wrapper"),{page:1,search:s,order:a})}}),t(document.body).on("keypress",".fmwp-topics-search-line",function(p){13===p.which&&t(this).parents("label").siblings(".fmwp-search-topic").trigger("click")}),t(document.body).on("click",".fmwp-search-toggle",function(p){p.preventDefault(),t(this).parents(".fmwp-topics-list-head-mobile").find(".fmwp-search-wrapper").is(":visible")?(t(this).removeClass("fmwp-active"),t(this).parents(".fmwp-topics-list-head-mobile").find(".fmwp-search-wrapper").css("display","none")):(t(this).parents(".fmwp-topics-list-head-mobile").find(".fmwp-search-wrapper").css("display","flex"),t(this).addClass("fmwp-active"))})});